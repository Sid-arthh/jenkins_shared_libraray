@Library("my-shared-lib") _
pipeline {
    agent any
    environment {
        AWS_REGION = "us-east-1"
        ECS_CLUSTER_NAME = 'SHARED_LIB'
        ECS_SERVICE_NAME = 'SERVICE5'
    }
    stages {
        stage('clean workspace') {
            steps {
                cleanWs()
            }
        }
    stage('Build'){
    appBuilder.buildApp()
    
    def imageUri = appBuilder.DockerBuildPushToECR()
    }
        stage('Build and Deploy') {
            steps {
                script {
                    // Call the wrapper function from the shared library
                    deployToECSWrapper(imageUri)
                }
            }
        }
    }
}
